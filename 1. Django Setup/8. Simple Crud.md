
---

### 1️⃣ **Model** (`models.py`)
```python
from django.db import models

class Student(models.Model):
    GENDER_CHOICES = [
        ('M', 'Male'),
        ('F', 'Female'),
        ('O', 'Other'),
    ]

    name = models.CharField(max_length=100)
    phone = models.CharField(max_length=15)
    email = models.EmailField(unique=True)
    gender = models.CharField(max_length=1, choices=GENDER_CHOICES)
    address = models.TextField()

    def __str__(self):
        return self.name
```

---

### 2️⃣ **Form with Validation** (`forms.py`)
```python
from django import forms
from .models import Student
import re

class StudentForm(forms.ModelForm):
    class Meta:
        model = Student
        fields = ['name', 'phone', 'email', 'gender', 'address']

    # Custom validation
    def clean_phone(self):
        phone = self.cleaned_data['phone']
        if not re.match(r'^\+?[0-9\s\-\(\)]{10,15}$', phone):
            raise forms.ValidationError("Enter a valid phone number (e.g., +1234567890).")
        return phone

    def clean_name(self):
        name = self.cleaned_data['name']
        if not re.match(r'^[a-zA-Z\s]+$', name):
            raise forms.ValidationError("Name must contain only letters and spaces.")
        if len(name.strip()) < 2:
            raise forms.ValidationError("Name must be at least 2 characters.")
        return name.strip()
```

---

### 3️⃣ **Views** (`views.py`)
```python
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib import messages
from .models import Student
from .forms import StudentForm

# CREATE & UPDATE
def student_form(request, pk=None):
    student = get_object_or_404(Student, pk=pk) if pk else None
    if request.method == 'POST':
        form = StudentForm(request.POST, instance=student)
        if form.is_valid():
            form.save()
            msg = f"Student '{form.instance.name}' updated!" if pk else "New student added!"
            messages.success(request, msg)
            return redirect('student_list')
    else:
        form = StudentForm(instance=student)
    return render(request, 'student_form.html', {
        'form': form,
        'edit_mode': pk is not None
    })

# READ (List)
def student_list(request):
    students = Student.objects.all()
    return render(request, 'student_list.html', {'students': students})

# DELETE (optional)
def student_delete(request, pk):
    student = get_object_or_404(Student, pk=pk)
    if request.method == 'POST':
        student.delete()
        messages.success(request, f"Student '{student.name}' deleted!")
        return redirect('student_list')
    return render(request, 'student_confirm_delete.html', {'student': student})
```

---

### 4️⃣ **Template: Form** (`student_form.html`) — **Manual Rendering**
```html
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
  <h2>{% if edit_mode %}Edit Student{% else %}Add Student{% endif %}</h2>

  <form method="post">
    {% csrf_token %}

    <!-- Name -->
    <div class="mb-3">
      <label class="form-label">Name <span class="text-danger">*</span></label>
      <input name="name" type="text" class="form-control" 
             value="{{ form.name.value|default:'' }}"
             placeholder="John Doe">
      {% if form.name.errors %}<div class="text-danger">{{ form.name.errors }}</div>{% endif %}
    </div>

    <!-- Email -->
    <div class="mb-3">
      <label class="form-label">Email <span class="text-danger">*</span></label>
      <input name="email" type="email" class="form-control"
             value="{{ form.email.value|default:'' }}"
             placeholder="john@example.com">
      {% if form.email.errors %}<div class="text-danger">{{ form.email.errors }}</div>{% endif %}
    </div>

    <!-- Phone -->
    <div class="mb-3">
      <label class="form-label">Phone <span class="text-danger">*</span></label>
      <input name="phone" type="tel" class="form-control"
             value="{{ form.phone.value|default:'' }}"
             placeholder="+1234567890">
      {% if form.phone.errors %}<div class="text-danger">{{ form.phone.errors }}</div>{% endif %}
    </div>

    <!-- Gender -->
    <div class="mb-3">
      <label class="form-label">Gender <span class="text-danger">*</span></label>
      <div>
        {% for value, label in form.fields.gender.choices %}
          <div class="form-check form-check-inline">
            <input class="form-check-input" type="radio" name="gender" id="gender_{{ value }}" 
                   value="{{ value }}" {% if form.gender.value == value %}checked{% endif %}>
            <label class="form-check-label" for="gender_{{ value }}">{{ label }}</label>
          </div>
        {% endfor %}
      </div>
      {% if form.gender.errors %}<div class="text-danger">{{ form.gender.errors }}</div>{% endif %}
    </div>

    <!-- Address -->
    <div class="mb-3">
      <label class="form-label">Address</label>
      <textarea name="address" class="form-control" rows="3"
                placeholder="123 Main St, City">{{ form.address.value|default:'' }}</textarea>
      {% if form.address.errors %}<div class="text-danger">{{ form.address.errors }}</div>{% endif %}
    </div>

    <!-- Buttons -->
    <div class="d-flex gap-2">
      <button type="submit" class="btn btn-primary">Save</button>
      <a href="{% url 'student_list' %}" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
</div>
</body>
</html>
```

---

### 5️⃣ **Template: List** (`student_list.html`)
```html
<!-- Include Bootstrap CSS -->
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Students</h2>
    <a href="{% url 'student_form' %}" class="btn btn-success">+ Add Student</a>
  </div>

  {% if students %}
    <table class="table table-striped">
      <thead><tr>
        <th>Name</th><th>Email</th><th>Phone</th><th>Gender</th><th>Actions</th>
      </tr></thead>
      <tbody>
        {% for s in students %}
        <tr>
          <td>{{ s.name }}</td>
          <td>{{ s.email }}</td>
          <td>{{ s.phone }}</td>
          <td>{{ s.get_gender_display }}</td>
          <td>
            <a href="{% url 'student_form' s.pk %}" class="btn btn-sm btn-warning">Edit</a>
            <form method="post" action="{% url 'student_delete' s.pk %}" style="display:inline;" 
                  onsubmit="return confirm('Delete?')">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger">Delete</button>
            </form>
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p class="text-muted">No students found.</p>
  {% endif %}
</div>
```

---

### 6️⃣ **URLs** (`urls.py`)
```python
from django.urls import path
from . import views

urlpatterns = [
    path('', views.student_list, name='student_list'),
    path('student/', views.student_form, name='student_form'),          # Create
    path('student/<int:pk>/', views.student_form, name='student_form'), # Update
    path('student/<int:pk>/delete/', views.student_delete, name='student_delete'),
]
```

---

### ✅ Key Points:
- **No `widgets`** used — all fields rendered manually in template.
- **Validation** in `forms.py` ensures data integrity.
- **`name="field"`** in `<input>` matches model field names → Django binds automatically.
- **CRUD** fully implemented: Create, Read, Update, Delete.
- **Bootstrap 5** styling applied manually.
- **Radio buttons** handled correctly with loop over choices.

Just run:
```bash
python manage.py makemigrations
python manage.py migrate
```
