# ğŸ“ Complete Django CRUD Project Structure

## ğŸ—‚ï¸ ASCII Project Structure

```
student_project/
â”‚
â”œâ”€â”€ student_app/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ models.py          # Database model
â”‚   â”œâ”€â”€ forms.py           # Form validation
â”‚   â”œâ”€â”€ views.py           # Business logic (Controller)
â”‚   â”œâ”€â”€ urls.py            # Routes
â”‚   â”œâ”€â”€ admin.py
â”‚   â”œâ”€â”€ apps.py
â”‚   â”œâ”€â”€ tests.py
â”‚   â”‚
â”‚   â”œâ”€â”€ templates/
â”‚   â”‚   â”œâ”€â”€ student_list.html           # READ (Display all)
â”‚   â”‚   â”œâ”€â”€ student_form.html           # CREATE/UPDATE (Form)
â”‚   â”‚   â””â”€â”€ student_confirm_delete.html # DELETE (Confirmation)
â”‚   â”‚
â”‚   â”œâ”€â”€ migrations/
â”‚   â”‚   â””â”€â”€ __init__.py
â”‚   â”‚
â”‚   â””â”€â”€ static/
â”‚       â””â”€â”€ css/
â”‚           â””â”€â”€ style.css (optional)
â”‚
â”œâ”€â”€ student_project/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ settings.py
â”‚   â”œâ”€â”€ urls.py           # Main URL config
â”‚   â””â”€â”€ wsgi.py
â”‚
â””â”€â”€ manage.py
```

---

## ğŸ¯ Function Definitions

| Function | Purpose | HTTP Method | URL |
|----------|---------|-------------|-----|
| **`student_list()`** | **READ** - Display all students | GET | `/` |
| **`student_form()`** | **LOAD FORM** - Show empty form | GET | `/student/` |
| **`student_form()`** | **CREATE** - Save new student | POST | `/student/` |
| **`student_form(pk)`** | **EDIT FORM** - Load form with data | GET | `/student/5/` |
| **`student_form(pk)`** | **UPDATE** - Save changes | POST | `/student/5/` |
| **`student_delete(pk)`** | **DELETE** - Remove student | POST | `/student/5/delete/` |

---

## ğŸ“‹ Complete Code

### 1ï¸âƒ£ **Model** (`models.py`)
```python
from django.db import models

class Student(models.Model):
    GENDER_CHOICES = [
        ('M', 'Male'),
        ('F', 'Female'),
        ('O', 'Other'),
    ]

    name = models.CharField(max_length=100)
    phone = models.CharField(max_length=15)
    email = models.EmailField(unique=True)
    gender = models.CharField(max_length=1, choices=GENDER_CHOICES)
    address = models.TextField()

    def __str__(self):
        return self.name
```

---

### 2ï¸âƒ£ **Form** (`forms.py`)
```python
from django import forms
from .models import Student
import re

class StudentForm(forms.ModelForm):
    class Meta:
        model = Student
        fields = ['name', 'phone', 'email', 'gender', 'address']

    # Validate phone number
    def clean_phone(self):
        phone = self.cleaned_data['phone']
        if not re.match(r'^\+?[0-9\s\-\(\)]{10,15}$', phone):
            raise forms.ValidationError("Enter a valid phone number")
        return phone

    # Validate name
    def clean_name(self):
        name = self.cleaned_data['name']
        if not re.match(r'^[a-zA-Z\s]+$', name):
            raise forms.ValidationError("Name must contain only letters")
        if len(name.strip()) < 2:
            raise forms.ValidationError("Name must be at least 2 characters")
        return name.strip()
```

---

### 3ï¸âƒ£ **Views/Controller** (`views.py`)

```python
from django.shortcuts import render, redirect, get_object_or_404
from django.contrib import messages
from .models import Student
from .forms import StudentForm


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“– READ - Display all students
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def student_list(request):
    """List all students"""
    students = Student.objects.all()
    return render(request, 'student_list.html', {'students': students})


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ“ LOAD FORM / CREATE / EDIT / UPDATE
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def student_form(request, pk=None):
    """
    LOAD FORM (GET):
        - If pk=None â†’ Show empty form (CREATE)
        - If pk=5 â†’ Show form with student #5 data (EDIT)
    
    SAVE DATA (POST):
        - If pk=None â†’ Create new student (CREATE)
        - If pk=5 â†’ Update existing student (UPDATE)
    """
    
    # Get existing student or None (for create)
    student = get_object_or_404(Student, pk=pk) if pk else None
    
    # ---- POST: Save data (CREATE or UPDATE) ----
    if request.method == 'POST':
        form = StudentForm(request.POST, instance=student)
        if form.is_valid():
            form.save()
            
            # Success message
            if pk:
                messages.success(request, f"âœ… Student '{form.instance.name}' updated!")
            else:
                messages.success(request, f"âœ… New student '{form.instance.name}' added!")
            
            return redirect('student_list')
    
    # ---- GET: Load form (LOAD FORM or EDIT) ----
    else:
        form = StudentForm(instance=student)
    
    return render(request, 'student_form.html', {
        'form': form,
        'edit_mode': pk is not None
    })


# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
# ğŸ—‘ï¸ DELETE - Remove student
# â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
def student_delete(request, pk):
    """Delete student after confirmation"""
    student = get_object_or_404(Student, pk=pk)
    
    if request.method == 'POST':
        name = student.name
        student.delete()
        messages.success(request, f"ğŸ—‘ï¸ Student '{name}' deleted!")
        return redirect('student_list')
    
    # Show confirmation page
    return render(request, 'student_confirm_delete.html', {'student': student})
```

---

### 4ï¸âƒ£ **Routes/URLs** (`urls.py`)

```python
from django.urls import path
from . import views

urlpatterns = [
    # READ - List all students
    path('', views.student_list, name='student_list'),
    
    # LOAD FORM + CREATE - Show empty form and save new student
    path('student/', views.student_form, name='student_form'),
    
    # EDIT + UPDATE - Load form with data and save changes
    path('student/<int:pk>/', views.student_form, name='student_form'),
    
    # DELETE - Remove student
    path('student/<int:pk>/delete/', views.student_delete, name='student_delete'),
]
```

---

### 5ï¸âƒ£ **Template: List** (`student_list.html`)

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Student List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    
    <!-- Header -->
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>ğŸ“š Students</h2>
        <a href="{% url 'student_form' %}" class="btn btn-success">â• Add Student</a>
    </div>

    <!-- Messages -->
    {% if messages %}
        {% for message in messages %}
        <div class="alert alert-success alert-dismissible fade show">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
        </div>
        {% endfor %}
    {% endif %}

    <!-- Table -->
    {% if students %}
    <table class="table table-striped table-hover">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Gender</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for student in students %}
            <tr>
                <td>{{ student.id }}</td>
                <td>{{ student.name }}</td>
                <td>{{ student.email }}</td>
                <td>{{ student.phone }}</td>
                <td>{{ student.get_gender_display }}</td>
                <td>
                    <a href="{% url 'student_form' student.pk %}" 
                       class="btn btn-sm btn-warning">âœï¸ Edit</a>
                    
                    <form method="post" action="{% url 'student_delete' student.pk %}" 
                          style="display:inline;"
                          onsubmit="return confirm('Are you sure?')">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-sm btn-danger">ğŸ—‘ï¸ Delete</button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <div class="alert alert-info">
        â„¹ï¸ No students found. <a href="{% url 'student_form' %}">Add one now</a>
    </div>
    {% endif %}

</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
```

---

### 6ï¸âƒ£ **Template: Form** (`student_form.html`)

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% if edit_mode %}Edit{% else %}Add{% endif %} Student</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    
    <h2>{% if edit_mode %}âœï¸ Edit Student{% else %}â• Add Student{% endif %}</h2>
    <hr>

    <form method="post">
        {% csrf_token %}

        <!-- Name -->
        <div class="mb-3">
            <label class="form-label">Name <span class="text-danger">*</span></label>
            <input name="name" type="text" class="form-control" 
                   value="{{ form.name.value|default:'' }}"
                   placeholder="John Doe" required>
            {% if form.name.errors %}
                <div class="text-danger">{{ form.name.errors }}</div>
            {% endif %}
        </div>

        <!-- Email -->
        <div class="mb-3">
            <label class="form-label">Email <span class="text-danger">*</span></label>
            <input name="email" type="email" class="form-control"
                   value="{{ form.email.value|default:'' }}"
                   placeholder="john@example.com" required>
            {% if form.email.errors %}
                <div class="text-danger">{{ form.email.errors }}</div>
            {% endif %}
        </div>

        <!-- Phone -->
        <div class="mb-3">
            <label class="form-label">Phone <span class="text-danger">*</span></label>
            <input name="phone" type="tel" class="form-control"
                   value="{{ form.phone.value|default:'' }}"
                   placeholder="+1234567890" required>
            {% if form.phone.errors %}
                <div class="text-danger">{{ form.phone.errors }}</div>
            {% endif %}
        </div>

        <!-- Gender -->
        <div class="mb-3">
            <label class="form-label">Gender <span class="text-danger">*</span></label>
            <div>
                {% for value, label in form.fields.gender.choices %}
                <div class="form-check form-check-inline">
                    <input class="form-check-input" type="radio" 
                           name="gender" 
                           id="gender_{{ value }}" 
                           value="{{ value }}"
                           {% if form.gender.value == value %}checked{% endif %}>
                    <label class="form-check-label" for="gender_{{ value }}">
                        {{ label }}
                    </label>
                </div>
                {% endfor %}
            </div>
            {% if form.gender.errors %}
                <div class="text-danger">{{ form.gender.errors }}</div>
            {% endif %}
        </div>

        <!-- Address -->
        <div class="mb-3">
            <label class="form-label">Address</label>
            <textarea name="address" class="form-control" rows="3"
                      placeholder="123 Main St, City">{{ form.address.value|default:'' }}</textarea>
            {% if form.address.errors %}
                <div class="text-danger">{{ form.address.errors }}</div>
            {% endif %}
        </div>

        <!-- Buttons -->
        <div class="d-flex gap-2">
            <button type="submit" class="btn btn-primary">
                ğŸ’¾ {% if edit_mode %}Update{% else %}Save{% endif %}
            </button>
            <a href="{% url 'student_list' %}" class="btn btn-secondary">âŒ Cancel</a>
        </div>
    </form>

</div>
</body>
</html>
```

---

### 7ï¸âƒ£ **Template: Delete Confirmation** (`student_confirm_delete.html`)

```html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Delete Student</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<div class="container mt-4">
    
    <div class="alert alert-danger">
        <h4>âš ï¸ Confirm Deletion</h4>
        <p>Are you sure you want to delete <strong>{{ student.name }}</strong>?</p>
    </div>

    <form method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger">ğŸ—‘ï¸ Yes, Delete</button>
        <a href="{% url 'student_list' %}" class="btn btn-secondary">âŒ Cancel</a>
    </form>

</div>
</body>
</html>
```

---

### 8ï¸âƒ£ **Main URLs** (`student_project/urls.py`)

```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    path('', include('student_app.urls')),  # Include app URLs
]
```

---

## ğŸš€ Run the Project

```bash
# 1. Create migrations
python manage.py makemigrations

# 2. Apply migrations
python manage.py migrate

# 3. Run server
python manage.py runserver

# 4. Open browser
# http://127.0.0.1:8000/
```

---

## ğŸ“Š Function Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CRUD OPERATIONS                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ğŸ“– READ (List):
   GET / â†’ student_list() â†’ student_list.html

ğŸ“ LOAD FORM (Create):
   GET /student/ â†’ student_form(pk=None) â†’ student_form.html (empty)

âœ… CREATE (Save):
   POST /student/ â†’ student_form(pk=None) â†’ redirect to list

âœï¸ EDIT (Load with data):
   GET /student/5/ â†’ student_form(pk=5) â†’ student_form.html (filled)

ğŸ”„ UPDATE (Save changes):
   POST /student/5/ â†’ student_form(pk=5) â†’ redirect to list

ğŸ—‘ï¸ DELETE:
   POST /student/5/delete/ â†’ student_delete(pk=5) â†’ redirect to list
```

---

## âœ… Key Features

âœ”ï¸ **Single form** handles both CREATE and UPDATE  
âœ”ï¸ **Manual field rendering** (no widgets)  
âœ”ï¸ **Form validation** in `forms.py`  
âœ”ï¸ **Bootstrap 5** styling  
âœ”ï¸ **Success messages** after actions  
âœ”ï¸ **Delete confirmation** page  
âœ”ï¸ **Clean URL structure**  

---

**Done! ğŸ‰** Simple, clean, and production-ready CRUD system!
